<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ergebnisse {{ year }} â€“ Casino Royale</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body{background:linear-gradient(145deg,#0d0b14,#1c1031);color:#f6e7bf}
    #winner-stickers{position:fixed;inset:0;pointer-events:none;z-index:3}
    #winner-stickers img{position:absolute;width:74px;opacity:.85;animation:drift 7s ease-in-out infinite}
    @keyframes drift{0%,100%{transform:translateY(0)}50%{transform:translateY(-15px)}}
    .header{padding:28px 0;text-align:center}
    .podium{display:flex;gap:16px;justify-content:center;align-items:flex-end;flex-wrap:wrap}
    .box{width:220px;background:#171124;border:1px solid #906928;border-radius:14px;padding:12px;box-shadow:0 0 20px rgba(255,214,123,.15)}
    .box img{width:100%;height:240px;object-fit:cover;border-radius:10px}
    .gold{outline:2px solid #d4a63a;transform:translateY(-10px)}
    .rank{font-size:1.3rem;margin-top:8px}
    .chip{display:inline-block;background:#2f2050;border:1px solid #9d7a34;color:#ffd98e;padding:5px 12px;border-radius:999px}
  </style>
</head>
<body>
  <div id="winner-stickers"></div>
  <div class="container py-3">
    <div class="header">
      <h1>ğŸ° Gewinner {{ year }} â€“ Casino Night</h1>
      <div class="chip">Finale Ergebnisse</div>
      <div class="mt-3"><a href="{{ url_for('main.contest_year', year=year) }}" class="btn btn-outline-warning btn-sm">ZurÃ¼ck zum Voting</a></div>
    </div>

    {% if top_images %}
    <div class="podium mt-4">
      {% for image in top_images %}
      <div class="box {% if loop.index == 1 %}gold{% endif %}">
        <img src="{{ url_for('static', filename='uploads/' ~ image.filename) }}" alt="{{ image.uploader }}">
        <div class="rank">{% if loop.index == 1 %}ğŸ¥‡{% elif loop.index == 2 %}ğŸ¥ˆ{% elif loop.index == 3 %}ğŸ¥‰{% else %}#{{ loop.index }}{% endif %}</div>
        <div><strong>{{ image.uploader or 'Anonymous' }}</strong></div>
        <div class="small text-warning">{{ image.vote_count }} Stimmen</div>
        <div class="small">{{ image.description or '' }}</div>
        <div class="small mt-1">{% if loop.index == 1 %}ğŸ–ï¸ High Roller{% elif loop.index == 2 %}ğŸ¯ Lucky Shot{% elif loop.index == 3 %}ğŸƒ Card Shark{% else %}ğŸ€ Crowd Favorite{% endif %}</div>
      </div>
      {% endfor %}
    </div>
    {% else %}
      <p class="text-center">Noch keine Ergebnisse verfÃ¼gbar.</p>
    {% endif %}
  </div>
<script>
fetch('/api/stickers/{{ year }}').then(r=>r.json()).then(stickers=>{
  const layer=document.getElementById('winner-stickers');
  const total=Math.min(16, stickers.length);
  for(let i=0;i<total;i++){
    const img=document.createElement('img');
    img.src=`/static/stickers/${stickers[Math.floor(Math.random()*stickers.length)]}`;
    img.style.left=`${Math.random()*95}%`;
    img.style.top=`${Math.random()*92}%`;
    img.style.animationDelay=`${Math.random()*4}s`;
    layer.appendChild(img);
  }
}).catch(()=>{});
</script>
</body>
</html>
